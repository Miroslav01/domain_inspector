<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Domain Inspector</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h1>Domain Inspector</h1>
    <form method="post">
        <div class="mb-3">
            <label for="domain" class="form-label">Domain Name</label>
            <input type="text" class="form-control" id="domain" name="domain" placeholder="example.com" value="{{ domain }}">
        </div>
        <button type="submit" class="btn btn-primary">Inspect Domain</button>
    </form>
    <hr>
    <form method="post">
        <div class="mb-3">
            <label for="url" class="form-label">URL for CURL GET</label>
            <input type="text" class="form-control" id="url" name="url" placeholder="https://example.com" value="{{ url }}">
        </div>
        <button type="submit" class="btn btn-secondary">CURL GET</button>
    </form>
    <hr>
    {% if domain_info %}
        <h3>Domain Info</h3>
        <ul>
            <li><b>A Record:</b> <pre>{{ domain_info.dns.A }}</pre></li>
            <li><b>WWW A Record:</b> <pre>{{ domain_info.dns.WWW_A }}</pre></li>
            <li><b>MX Record:</b> <pre>{{ domain_info.dns.MX }}</pre></li>
            <li><b>TXT Record:</b> <pre>{{ domain_info.dns.TXT }}</pre></li>
            <li><b>Nameservers:</b>
                <pre {% if domain_info.dns.cloudflare %}style="background: #ffe;"{% endif %}>
                {{ domain_info.dns.NS }}
                </pre>
                {% if domain_info.dns.cloudflare %}
                <span class="badge bg-warning text-dark">Cloudflare detected!</span>
                {% endif %}
            </li>
        </ul>
        <h4>WHOIS</h4>
        <ul>
            <li><b>Registrar:</b> {{ domain_info.whois.registrar }}</li>
            <li><b>Expiration Date:</b>
                <span {% if domain_info.whois.expired or domain_info.whois.redemption %}class="text-danger"{% endif %}>
                {{ domain_info.whois.expiration }}
                </span>
                {% if domain_info.whois.expired %}
                <span class="badge bg-danger">Expired</span>
                {% endif %}
                {% if domain_info.whois.redemption %}
                <span class="badge bg-danger">Redemption Period</span>
                {% endif %}
            </li>
            <li><b>Status:</b>
                <ul>
                    {% for s in domain_info.whois.statuses %}
                    <li {% if 'hold' in s.lower() %}class="text-danger"{% endif %}>{{ s }}</li>
                    {% endfor %}
                </ul>
            </li>
        </ul>
        <details>
            <summary>Raw WHOIS</summary>
            <pre>{{ domain_info.whois_raw }}</pre>
        </details>
    {% endif %}
    {% if curl_info %}
        <h3>CURL GET Response</h3>
        <details>
            <summary>HTTP Response Headers</summary>
            <pre>{{ curl_info.headers }}</pre>
        </details>
        <h4>Analysis</h4>
        <ul>
            {% for a in curl_info.analysis %}
            <li {% if 'Missing' in a %}class="text-danger"{% endif %}>{{ a }}</li>
            {% endfor %}
        </ul>
    {% endif %}
</div>
</body>
</html>