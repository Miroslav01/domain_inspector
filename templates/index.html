<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Domain Inspector</title>
    <style>
        .dns-output {
            font-size: 0.97em;
            font-family: 'Segoe UI', Arial, sans-serif;
            color: #333;
            font-weight: 400;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #fff;
            margin: 0;
            padding: 0;
        }
        .container {
            margin: 0 auto;
            padding: 24px 0 0 0;
            /* max-width removed for full width */
        }
        .title {
            text-align: center;
            font-size: 2.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }
        .input-row {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }
        .input-row input[type="text"] {
            font-size: 1.1rem;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            border: 1px solid #ccc;
            width: 350px;
        }
        .input-row button {
            font-size: 1.1rem;
            padding: 0.5rem 1.2rem;
            border-radius: 6px;
            border: none;
            background: #1976d2;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
        }
        .panels-row {
            display: flex;
            gap: 2rem;
            justify-content: space-between;
            align-items: flex-start;
            width: 100vw;
            padding: 0 2vw;
            box-sizing: border-box;
        }
        .panel {
            flex: 1 1 0;
            min-width: 220px;
            background: #f9fafc;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            border: 1px solid #e0e0e0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .panel-header {
            font-size: 1.25rem;
            font-weight: 600;
            padding: 0.8rem 1rem;
            border-bottom: 1px solid #e0e0e0;
        }
        .panel-header.dns { background: #1976d2; color: #fff; }
        .panel-header.whois { background: #757575; color: #fff; }
        .panel-header.curl { background: #222; color: #fff; }
        .panel-header.analysis { background: #00cfff; color: #222; }
        .panel-body {
            padding: 1rem;
            font-size: 1.05rem;
            flex: 1;
        }
        .dns-record-label {
            font-weight: bold;
            font-size: 1em;
            margin-bottom: 0.15em;
        }
        .long-txt-record {
            max-height: 6em;
            overflow-y: auto;
            font-size: 0.97em;
            background: #f9fafc;
            border-radius: 4px;
            padding: 0.5em;
            scrollbar-width: thin;
            scrollbar-color: #bbb #f9fafc;
            position: relative;
        }
        .long-txt-record::-webkit-scrollbar {
            width: 6px;
            background: #f9fafc;
        }
        .long-txt-record::-webkit-scrollbar-thumb {
            background: #bbb;
            border-radius: 6px;
        }
        .checked-domain-name {
            color: #fff;
            font-size: 1.2rem;
            font-weight: bold;
            padding-left: 0.25em;
        }
        @media (max-width: 1100px) {
            .panels-row {
                gap: 1rem;
            }
        }
        @media (max-width: 900px) {
            .panels-row {
                flex-direction: column;
                gap: 2rem;
                width: 100%;
                padding: 0;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="title">Domain Inspector</div>
    <form method="post">
        <div class="input-row">
            <input type="text" id="domain" name="domain" placeholder="example.com or 8.8.8.8" value="{{ domain if domain else '' }}">
            <button type="submit">Inspect</button>
        </div>
    </form>
    <div class="panels-row">
        <div class="panel">
            <div class="panel-header dns">DNS Info{% if domain %} for <span class="checked-domain-name">{{ domain }}</span>{% endif %}</div>
            <div class="panel-body">
                {% if domain_info %}
                <table style="width:100%; border-collapse:collapse; font-size:0.89em;">
                    <tbody>
                        <tr>
                            <td class="dns-record-label" style="width: 95px; padding: 0.25em 0.4em; font-weight: normal; vertical-align: top; white-space:nowrap;">A</td>
                            <td style="padding: 0.25em 1.2em; vertical-align: top;">
                                {% if domain_info.dns.A and domain_info.dns.A|length > 0 %}
                                    <div>
                                        {% for ip in domain_info.dns.A[:4] %}
                                            <div class="dns-output" style="white-space:nowrap;">{{ ip }}</div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <span class="dns-output">No A records found</span>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td class="dns-record-label" style="width: 95px; padding: 0.25em 0.4em; font-weight: normal; vertical-align: top; white-space:nowrap;">WWW</td>
                            <td style="padding: 0.25em 1.2em; vertical-align: top;">
                                {% if domain_info.dns.WWW_A and domain_info.dns.WWW_A|length > 0 %}
                                    <div>
                                        {% for ip in domain_info.dns.WWW_A[:4] %}
                                            <div class="dns-output" style="white-space:nowrap;">{{ ip }}</div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <span class="dns-output">No WWW A records found</span>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td class="dns-record-label" style="width: 95px; padding: 0.25em 0.4em; font-weight: normal; vertical-align: top; white-space:nowrap;">IPv6</td>
                                <td style="padding: 0.25em 1.2em; vertical-align: top;">
                                {% if domain_info.dns.AAAA and domain_info.dns.AAAA|length > 0 %}
                                    <span class="dns-output">{{ domain_info.dns.AAAA | join(' ') }}</span>
                                {% else %}
                                    <span class="dns-output">No IPv6 Found</span>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td class="dns-record-label" style="width: 95px; padding: 0.25em 0.4em; font-weight: normal; vertical-align: top; white-space:nowrap;">TXT</td>
                                <td style="padding: 0.25em 1.2em; vertical-align: top;">
                                {% if domain_info.dns.TXT and domain_info.dns.TXT|length > 0 %}
                                    <div class="long-txt-record">
                                        {% for txt in domain_info.dns.TXT %}
                                            <div class="dns-output" style="margin-bottom:0.3em; white-space:nowrap; overflow-x:auto; text-overflow:ellipsis;">{{ txt }}</div>
                                        {% endfor %}
                                        {% if domain_info.dns.TXT|length > 4 %}
                                            <div style="position:absolute; left:0; right:0; bottom:0; height:2em; pointer-events:none; background:linear-gradient(to bottom, rgba(249,250,252,0) 0%, rgba(249,250,252,0.95) 100%);"></div>
                                        {% endif %}
                                    </div>
                                {% else %}
                                    <span class="dns-output">No TXT records found</span>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td class="dns-record-label" style="width: 95px; padding: 0.25em 0.4em; font-weight: normal; vertical-align: top; white-space:nowrap;">MX</td>
                                <td style="padding: 0.25em 1.2em;">
                                {% if domain_info.dns.MX and domain_info.dns.MX|length > 0 %}
                                    <div>
                                        {% for mx in domain_info.dns.MX %}
                                            <div class="dns-output" style="white-space:nowrap; overflow-x:auto; max-width:100%; scrollbar-width:none; -ms-overflow-style:none;">{{ mx }}</div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <span class="dns-output">No MX records found</span>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td class="dns-record-label" style="width: 95px; padding: 0.25em 0.4em; font-weight: normal; vertical-align: top;">NS</td>
                                <td style="padding: 0.25em 1.2em; vertical-align: top;">
                                {% if domain_info.dns.NS and domain_info.dns.NS|length > 0 %}
                                    <div>
                                        {% for ns in domain_info.dns.NS %}
                                            <div class="dns-output" style="white-space:nowrap;">{{ ns }}</div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <span class="dns-output">No NS records found</span>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td class="dns-record-label" style="width: 95px; padding: 0.25em 0.4em; font-weight: normal; vertical-align: top;">DNSSEC</td>
                                <td style="word-break:break-all; padding: 0.25em 1.2em;">
                                {% if domain_info.dns.dnssec %}
                                    <span class="dns-output">Enabled</span>
                                {% else %}
                                    <span class="dns-output">Not enabled</span>
                                {% endif %}
                            </td>
                        </tr>
                    </tbody>
                </table>
                {% else %}
                <div class="text-muted">No DNS info yet.</div>
                {% endif %}
            </div>
        </div>
        <div class="panel">
            <div class="panel-header whois">WHOIS Info{% if domain %} for <span class="checked-domain-name">{{ domain }}</span>{% endif %}</div>
            <div class="panel-body">
                {% if domain_info and domain_info.whois %}
                    <div class="dns-output" style="margin-bottom:1em;">Registrar: {{ domain_info.whois.registrar }}</div>
                    {% if domain_info.whois.nameservers %}
                        <div class="dns-output" style="margin-bottom:1em;">Nameservers:
                            {% for ns in domain_info.whois.nameservers %}
                                <span class="dns-output" style="display:block; margin-left:1em;">{{ ns }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {% set hold_statuses = domain_info.whois.statuses | select('in', ['clientHold', 'serverHold']) | list %}
                    {% if hold_statuses and hold_statuses|length > 0 %}
                        <div class="dns-output" style="color:#d32f2f;">Status: {{ hold_statuses | join(', ') }}</div>
                    {% endif %}
                    {% if domain_info.whois.expiration and domain_info.whois.expired %}
                        <div class="dns-output" style="color:#d32f2f;">Expired: {{ domain_info.whois.expiration }}</div>
                    {% endif %}
                    {% if domain_info.whois.raw %}
                        <details style="margin-top:1.5em;">
                            <summary style="font-size:1.08em; font-weight:500; cursor:pointer; color:#222; padding:0.2em 0;">Raw WHOIS</summary>
                            <div class="dns-output" style="margin-top:0.7em; background:#fff; border-radius:4px; padding:0.5em; font-size:0.97em; color:#222; max-height:12em; overflow-y:auto; white-space:pre-wrap; border:1px solid #e0e0e0;">
                                {{ domain_info.whois.raw }}
                            </div>
                        </details>
                    {% endif %}
                {% else %}
                    <div class="text-muted">No WHOIS info yet.</div>
                {% endif %}
            </div>
        </div>
        <div class="panel">
            <div class="panel-header curl">CURL GET Info{% if domain %} for <span class="checked-domain-name">{{ domain }}</span>{% endif %}</div>
            <div class="panel-body">
                {% if curl_info and curl_info.headers %}
                    <div style="background:#f9fafc; border-radius:4px; padding:0.5em; font-size:0.97em; color:#333; width:100%; box-sizing:border-box;">
                        {% for line in curl_info.headers.split('\n') %}
                            <div class="dns-output" style="white-space:nowrap; overflow-x:hidden; text-overflow:ellipsis;">{{ line }}</div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-muted">No CURL info yet.</div>
                {% endif %}
            </div>
        </div>
        <div class="panel">
            <div class="panel-header analysis">Analysis</div>
            <div class="panel-body">
                <div class="text-muted">Analysis and conclusions will appear here.</div>
            </div>
        </div>
    </div>
</div>
</body>
</html>